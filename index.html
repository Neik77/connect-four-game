<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Connect Four vs Computer</title>
  <style>
    body { background: #222; color: white; text-align: center; font-family: sans-serif; }
    #board { display: grid; grid-template-columns: repeat(7, 60px); gap: 5px; justify-content: center; margin-top: 20px; }
    .cell { width: 60px; height: 60px; border-radius: 50%; background: #444; cursor: pointer; }
    .cell.red { background: red; }
    .cell.yellow { background: gold; }
    button { margin-top: 20px; padding: 10px 20px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>Connect 4 â€” You vs Computer</h1>
  <div id="board"></div>
  <p id="status"></p>
  <button id="restart">Restart Game</button>

  <script>
    const COLS = 7, ROWS = 6;
    let board = Array.from({ length: ROWS }, () => Array(COLS).fill(null));
    let current = 'red';  // human always goes red
    const boardEl = document.getElementById('board');
    const status = document.getElementById('status');
    const restartBtn = document.getElementById('restart');

    function drawBoard(){
      boardEl.innerHTML = '';
      board.forEach((row, r) => {
        row.forEach((cell, c) => {
          const div = document.createElement('div');
          div.className = 'cell ' + (cell || '');
          div.onclick = () => {
            if (current === 'red') dropPiece(c);
          };
          boardEl.appendChild(div);
        });
      });
    }

    function dropPiece(c){
      for (let r = ROWS - 1; r >= 0; r--) {
        if (!board[r][c]) {
          board[r][c] = current;
          if (checkWin(r, c)) {
            status.textContent = current.toUpperCase() + ' WINS!';
            disableClicks();
            return;
          }
          current = current === 'red' ? 'yellow' : 'red';
          drawBoard();
          if (current === 'yellow') {
            setTimeout(aiMove, 500);
          }
          return;
        }
      }
    }

    function aiMove(){
      // Simple AI: pick a random non-full column
      const possible = [];
      for (let c = 0; c < COLS; c++) {
        if (!board[0][c]) possible.push(c);
      }
      if (possible.length === 0) {
        status.textContent = 'Draw!';
        return;
      }
      const choice = possible[Math.floor(Math.random() * possible.length)];
      dropPiece(choice);
    }

    function disableClicks(){
      document.querySelectorAll('.cell').forEach(cell => cell.onclick = null);
    }

    function checkWin(r, c) {
      const dirs = [[1,0],[0,1],[1,1],[1,-1]];
      return dirs.some(([dr, dc]) => {
        let count = 1;
        for (let i = 1; i < 4; i++) {
          if (board[r + dr * i]?.[c + dc * i] === current) count++;
          else break;
        }
        for (let i = 1; i < 4; i++) {
          if (board[r - dr * i]?.[c - dc * i] === current) count++;
          else break;
        }
        return count >= 4;
      });
    }

    restartBtn.onclick = () => {
      board = Array.from({ length: ROWS }, () => Array(COLS).fill(null));
      current = 'red';
      status.textContent = '';
      drawBoard();
    };

    drawBoard();
  </script>
</body>
</html>
